<?xml version="1.0"?>
<phpunit xmlns="https://schema.phpunit.de/coverage/1.0">
  <file name="FTPTest.php" path="/ftp">
    <totals>
      <lines total="48" comments="11" code="37" executable="24" executed="0" percent="0.00"/>
      <methods count="0" tested="0" percent="0"/>
      <functions count="0" tested="0" percent="0"/>
      <classes count="0" tested="0" percent="0"/>
      <traits count="0" tested="0" percent="0"/>
    </totals>
    <source>
      <line no="1">
        <token name="T_OPEN_TAG">&lt;?php</token>
      </line>
      <line no="2">
        <token name="T_IF">if</token>
        <token name="T_WHITESPACE"> </token>
        <token name="T_OPEN_BRACKET">(</token>
        <token name="T_ISSET">isset</token>
        <token name="T_OPEN_BRACKET">(</token>
        <token name="T_VARIABLE">$_POST</token>
        <token name="T_OPEN_SQUARE">[</token>
        <token name="T_CONSTANT_ENCAPSED_STRING">'submitted'</token>
        <token name="T_CLOSE_SQUARE">]</token>
        <token name="T_CLOSE_BRACKET">)</token>
        <token name="T_CLOSE_BRACKET">)</token>
        <token name="T_OPEN_CURLY">{</token>
      </line>
      <line no="3">
        <token name="T_COMMENT">// get FTP access parameters</token>
      </line>
      <line no="4">
        <token name="T_VARIABLE">$host</token>
        <token name="T_WHITESPACE"> </token>
        <token name="T_EQUAL">=</token>
        <token name="T_WHITESPACE"> </token>
        <token name="T_CONSTANT_ENCAPSED_STRING">'103.14.232.186'</token>
        <token name="T_SEMICOLON">;</token>
      </line>
      <line no="5">
        <token name="T_VARIABLE">$user</token>
        <token name="T_WHITESPACE"> </token>
        <token name="T_EQUAL">=</token>
        <token name="T_WHITESPACE"> </token>
        <token name="T_CONSTANT_ENCAPSED_STRING">'brijeshdhaker'</token>
        <token name="T_SEMICOLON">;</token>
      </line>
      <line no="6">
        <token name="T_VARIABLE">$pass</token>
        <token name="T_WHITESPACE"> </token>
        <token name="T_EQUAL">=</token>
        <token name="T_WHITESPACE"> </token>
        <token name="T_CONSTANT_ENCAPSED_STRING">'accoo7ak47'</token>
        <token name="T_SEMICOLON">;</token>
      </line>
      <line no="7">
        <token name="T_VARIABLE">$destDir</token>
        <token name="T_WHITESPACE"> </token>
        <token name="T_EQUAL">=</token>
        <token name="T_WHITESPACE"> </token>
        <token name="T_CONSTANT_ENCAPSED_STRING">'/uploads'</token>
        <token name="T_SEMICOLON">;</token>
      </line>
      <line no="8">
        <token name="T_VARIABLE">$workDir</token>
        <token name="T_WHITESPACE"> </token>
        <token name="T_EQUAL">=</token>
        <token name="T_WHITESPACE"> </token>
        <token name="T_VARIABLE">$_SERVER</token>
        <token name="T_WHITESPACE"> </token>
        <token name="T_OPEN_SQUARE">[</token>
        <token name="T_CONSTANT_ENCAPSED_STRING">'DOCUMENT_ROOT'</token>
        <token name="T_CLOSE_SQUARE">]</token>
        <token name="T_DOT">.</token>
        <token name="T_CONSTANT_ENCAPSED_STRING">'/tmp'</token>
        <token name="T_SEMICOLON">;</token>
        <token name="T_WHITESPACE"> </token>
        <token name="T_COMMENT">// define this as per local system</token>
      </line>
      <line no="9">
        <token name="T_COMMENT">// get temporary file name for the uploaded file</token>
      </line>
      <line no="10">
        <token name="T_VARIABLE">$tmpName</token>
        <token name="T_WHITESPACE"> </token>
        <token name="T_EQUAL">=</token>
        <token name="T_WHITESPACE"> </token>
        <token name="T_STRING">basename</token>
        <token name="T_OPEN_BRACKET">(</token>
        <token name="T_VARIABLE">$_FILES</token>
        <token name="T_OPEN_SQUARE">[</token>
        <token name="T_CONSTANT_ENCAPSED_STRING">'file'</token>
        <token name="T_CLOSE_SQUARE">]</token>
        <token name="T_OPEN_SQUARE">[</token>
        <token name="T_CONSTANT_ENCAPSED_STRING">'tmp_name'</token>
        <token name="T_CLOSE_SQUARE">]</token>
        <token name="T_CLOSE_BRACKET">)</token>
        <token name="T_SEMICOLON">;</token>
      </line>
      <line no="11"/>
      <line no="12">
        <token name="T_COMMENT">// copy uploaded file into current directory</token>
      </line>
      <line no="13">
        <token name="T_STRING">move_uploaded_file</token>
        <token name="T_OPEN_BRACKET">(</token>
        <token name="T_VARIABLE">$_FILES</token>
        <token name="T_OPEN_SQUARE">[</token>
        <token name="T_CONSTANT_ENCAPSED_STRING">'file'</token>
        <token name="T_CLOSE_SQUARE">]</token>
        <token name="T_OPEN_SQUARE">[</token>
        <token name="T_CONSTANT_ENCAPSED_STRING">'tmp_name'</token>
        <token name="T_CLOSE_SQUARE">]</token>
        <token name="T_COMMA">,</token>
        <token name="T_WHITESPACE"> </token>
        <token name="T_VARIABLE">$workDir</token>
        <token name="T_DOT">.</token>
        <token name="T_CONSTANT_ENCAPSED_STRING">"/"</token>
        <token name="T_DOT">.</token>
        <token name="T_VARIABLE">$tmpName</token>
        <token name="T_CLOSE_BRACKET">)</token>
      </line>
      <line no="14">
        <token name="T_WHITESPACE"> </token>
        <token name="T_LOGICAL_OR">or</token>
        <token name="T_WHITESPACE"> </token>
        <token name="T_EXIT">die</token>
        <token name="T_OPEN_BRACKET">(</token>
        <token name="T_CONSTANT_ENCAPSED_STRING">"Cannot move uploaded file to working directory"</token>
        <token name="T_CLOSE_BRACKET">)</token>
        <token name="T_SEMICOLON">;</token>
      </line>
      <line no="15"/>
      <line no="16">
        <token name="T_COMMENT">// open connection</token>
      </line>
      <line no="17">
        <token name="T_VARIABLE">$conn</token>
        <token name="T_WHITESPACE"> </token>
        <token name="T_EQUAL">=</token>
        <token name="T_WHITESPACE"> </token>
        <token name="T_STRING">ftp_connect</token>
        <token name="T_OPEN_BRACKET">(</token>
        <token name="T_VARIABLE">$host</token>
        <token name="T_CLOSE_BRACKET">)</token>
        <token name="T_WHITESPACE"> </token>
        <token name="T_LOGICAL_OR">or</token>
        <token name="T_WHITESPACE"> </token>
        <token name="T_EXIT">die</token>
        <token name="T_WHITESPACE"> </token>
        <token name="T_OPEN_BRACKET">(</token>
        <token name="T_CONSTANT_ENCAPSED_STRING">"Cannot initiate connection to host"</token>
        <token name="T_CLOSE_BRACKET">)</token>
        <token name="T_SEMICOLON">;</token>
      </line>
      <line no="18"/>
      <line no="19">
        <token name="T_COMMENT">// send access parameters</token>
      </line>
      <line no="20">
        <token name="T_STRING">ftp_login</token>
        <token name="T_OPEN_BRACKET">(</token>
        <token name="T_VARIABLE">$conn</token>
        <token name="T_COMMA">,</token>
        <token name="T_WHITESPACE"> </token>
        <token name="T_VARIABLE">$user</token>
        <token name="T_COMMA">,</token>
        <token name="T_WHITESPACE"> </token>
        <token name="T_VARIABLE">$pass</token>
        <token name="T_CLOSE_BRACKET">)</token>
        <token name="T_WHITESPACE"> </token>
        <token name="T_LOGICAL_OR">or</token>
        <token name="T_WHITESPACE"> </token>
        <token name="T_EXIT">die</token>
        <token name="T_OPEN_BRACKET">(</token>
        <token name="T_CONSTANT_ENCAPSED_STRING">"Cannot login"</token>
        <token name="T_CLOSE_BRACKET">)</token>
        <token name="T_SEMICOLON">;</token>
      </line>
      <line no="21"/>
      <line no="22">
        <token name="T_COMMENT">// perform file upload</token>
      </line>
      <line no="23">
        <token name="T_VARIABLE">$upload</token>
        <token name="T_WHITESPACE"> </token>
        <token name="T_EQUAL">=</token>
        <token name="T_WHITESPACE"> </token>
        <token name="T_STRING">ftp_put</token>
        <token name="T_OPEN_BRACKET">(</token>
        <token name="T_VARIABLE">$conn</token>
        <token name="T_COMMA">,</token>
        <token name="T_WHITESPACE"> </token>
        <token name="T_VARIABLE">$destDir</token>
        <token name="T_DOT">.</token>
        <token name="T_CONSTANT_ENCAPSED_STRING">"/"</token>
        <token name="T_DOT">.</token>
        <token name="T_VARIABLE">$_FILES</token>
        <token name="T_OPEN_SQUARE">[</token>
        <token name="T_CONSTANT_ENCAPSED_STRING">'file'</token>
        <token name="T_CLOSE_SQUARE">]</token>
        <token name="T_OPEN_SQUARE">[</token>
        <token name="T_CONSTANT_ENCAPSED_STRING">'name'</token>
        <token name="T_CLOSE_SQUARE">]</token>
        <token name="T_COMMA">,</token>
        <token name="T_VARIABLE">$workDir</token>
        <token name="T_DOT">.</token>
        <token name="T_CONSTANT_ENCAPSED_STRING">"/"</token>
        <token name="T_DOT">.</token>
        <token name="T_VARIABLE">$tmpName</token>
        <token name="T_COMMA">,</token>
        <token name="T_WHITESPACE"> </token>
        <token name="T_STRING">FTP_BINARY</token>
        <token name="T_CLOSE_BRACKET">)</token>
        <token name="T_SEMICOLON">;</token>
      </line>
      <line no="24"/>
      <line no="25">
        <token name="T_COMMENT">// check upload status</token>
      </line>
      <line no="26">
        <token name="T_COMMENT">// display message</token>
      </line>
      <line no="27">
        <token name="T_IF">if</token>
        <token name="T_WHITESPACE"> </token>
        <token name="T_OPEN_BRACKET">(</token>
        <token name="T_EXCLAMATION_MARK">!</token>
        <token name="T_VARIABLE">$upload</token>
        <token name="T_CLOSE_BRACKET">)</token>
        <token name="T_WHITESPACE"> </token>
        <token name="T_OPEN_CURLY">{</token>
      </line>
      <line no="28">
        <token name="T_WHITESPACE">  </token>
        <token name="T_ECHO">echo</token>
        <token name="T_WHITESPACE"> </token>
        <token name="T_CONSTANT_ENCAPSED_STRING">"Cannot upload"</token>
        <token name="T_SEMICOLON">;</token>
      </line>
      <line no="29">
        <token name="T_CLOSE_CURLY">}</token>
        <token name="T_WHITESPACE"> </token>
        <token name="T_ELSE">else</token>
        <token name="T_WHITESPACE"> </token>
        <token name="T_OPEN_CURLY">{</token>
      </line>
      <line no="30">
        <token name="T_WHITESPACE">  </token>
        <token name="T_ECHO">echo</token>
        <token name="T_WHITESPACE"> </token>
        <token name="T_CONSTANT_ENCAPSED_STRING">"Upload complete"</token>
        <token name="T_SEMICOLON">;</token>
      </line>
      <line no="31">
        <token name="T_CLOSE_CURLY">}</token>
      </line>
      <line no="32"/>
      <line no="33">
        <token name="T_COMMENT">// close the FTP stream</token>
      </line>
      <line no="34">
        <token name="T_STRING">ftp_close</token>
        <token name="T_OPEN_BRACKET">(</token>
        <token name="T_VARIABLE">$conn</token>
        <token name="T_CLOSE_BRACKET">)</token>
        <token name="T_SEMICOLON">;</token>
      </line>
      <line no="35"/>
      <line no="36">
        <token name="T_COMMENT">// delete local copy of uploaded file</token>
      </line>
      <line no="37">
        <token name="T_STRING">unlink</token>
        <token name="T_OPEN_BRACKET">(</token>
        <token name="T_VARIABLE">$workDir</token>
        <token name="T_DOT">.</token>
        <token name="T_CONSTANT_ENCAPSED_STRING">"/"</token>
        <token name="T_DOT">.</token>
        <token name="T_VARIABLE">$tmpName</token>
        <token name="T_CLOSE_BRACKET">)</token>
        <token name="T_WHITESPACE"> </token>
        <token name="T_LOGICAL_OR">or</token>
        <token name="T_WHITESPACE"> </token>
        <token name="T_EXIT">die</token>
        <token name="T_OPEN_BRACKET">(</token>
        <token name="T_CONSTANT_ENCAPSED_STRING">"Cannot delete uploaded</token>
      </line>
      <line no="38">
        <token name="T_CONSTANT_ENCAPSED_STRING"> file from working directory -- manual deletion recommended"</token>
        <token name="T_CLOSE_BRACKET">)</token>
        <token name="T_SEMICOLON">;</token>
      </line>
      <line no="39">
        <token name="T_CLOSE_CURLY">}</token>
      </line>
      <line no="40"/>
      <line no="41">
        <token name="T_CLOSE_TAG">?&gt;</token>
      </line>
      <line no="42"/>
      <line no="43">
        <token name="T_INLINE_HTML">&lt;form enctype="multipart/form-data" method="post" action="FTPTest.php"&gt;</token>
      </line>
      <line no="44">
        <token name="T_INLINE_HTML">File &lt;br /&gt;</token>
      </line>
      <line no="45">
        <token name="T_INLINE_HTML">&lt;input type="file" name="file" /&gt;&lt;p /&gt;</token>
      </line>
      <line no="46">
        <token name="T_INLINE_HTML">&lt;input type="submit" name="submit" value="Upload File" /&gt;</token>
      </line>
      <line no="47">
        <token name="T_INLINE_HTML">&lt;input type="hidden" name="submitted" value="TRUE" /&gt;</token>
      </line>
      <line no="48">
        <token name="T_INLINE_HTML">&lt;/form&gt;</token>
      </line>
    </source>
  </file>
</phpunit>
